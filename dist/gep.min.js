/**
 * gep --- By lon
 * Github: https://github.com/cnlon/gep
 * MIT Licensed.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("gep",t):e.gep=t()}(this,function(){"use strict";function e(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function t(e,t){var n=y.length;return y[n]=t?e.replace(h,"\\n"):e,'"'+n+'"'}function n(e,t){return y[t]}function r(e){return d.test(e)&&!w.test(e)}function i(e){return new RegExp("^(?:"+e.replace(l,"").replace(/\$/g,"\\$").replace(/,/g,"\\b|")+"\\b)")}var o=e.prototype;o.put=function(e,t){var n;this.size===this.limit&&(n=this.shift());var r=this.get(e,!0);return r||(r={key:e},this._keymap[e]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size++),r.value=t,n},o.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},o.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var a=(function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,i){var s={key:e,arg:t,resolve:n,reject:i,next:null};a?a=a.next=s:(o=a=s,r(e,t))})}function r(n,o){try{var a=t[n](o),s=a.value;s instanceof e?Promise.resolve(s.value).then(function(e){r("next",e)},function(e){r("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?r(o.key,o.arg):a=null}var o,a;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",u=new RegExp("^("+"break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public".replace(/,/g,"\\b|")+"\\b)"),l=/\s/g,h=/\n/g,f=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,p=/"(\d+)"/g,d=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,v=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,w=/^(?:true|false)$/,y=[],_=function(){function o(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.cache,s=void 0===r?1e3:r,u=n.scope,h=void 0===u?"$":u,f=n.scopes,p=n.params;a(this,o),p||(f?(p=Object.keys(f),p.unshift(h)):p=[h]),this._cache=new e(s),this._funcParams=p.join(",").replace(l,""),this._funcBefore="function("+this._funcParams+"){return ",this.scope=h,f&&!function(){var e=void 0;Object.keys(f).forEach(function(t){e=f[t],Array.isArray(e)&&(e=e.join(",")),f[t]=i(e)}),t._scopeREs=f}();var d=void 0;p.length>1&&(p=p.slice(1),d=p.join(","),this._paramsPrefixRE=i(d));var v=d?d+","+c:c;this._allowedKeywordsRE=i(v)}return s(o,[{key:"_addScope",value:function(e){if(this._paramsPrefixRE&&this._paramsPrefixRE.test(e))return e;if(this._scopeREs)for(var t=Object.keys(this._scopeREs),n=void 0,r=0,i=t.length;r<i;r++)if(n=this._scopeREs[t[r]],n.test(e))return t[r]+"."+e;return this.scope+"."+e}},{key:"compile",value:function(e){var r=this;u.test(e)&&"production"!==process.env.NODE_ENV&&console&&console.warn&&console.warn("Avoid using reserved keywords in expression: "+e),y.length=0;var i=e.replace(f,t).replace(l,"");return i=(" "+i).replace(v,function(e){var t=e.charAt(0),i=e.slice(1);return r._allowedKeywordsRE.test(i)?e:(i=i.indexOf('"')>-1?i.replace(p,n):i,t+r._addScope(i))}).replace(p,n),i.slice(1)}},{key:"make",value:function(e,t){if(t)return this._funcBefore+e+"}";try{return new Function(this._funcParams,"return "+e)}catch(t){"production"!==process.env.NODE_ENV&&console&&console.warn&&console.warn("Invalid expression. Generated function body: "+e)}}},{key:"parse",value:function(e){if(!e||!(e=e.trim()))return"";var t=this._cache.get(e);if(t)return t;var n=r(e)&&e.indexOf("[")<0?this._addScope(e):this.compile(e);return this._cache.put(e,n),n}}]),o}();return _});
//# sourceMappingURL=gep.min.js.map